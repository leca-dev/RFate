<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>What FATE needs to be run?</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>





<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<p><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous"></p>

<style>
pre.bash {
 background-color: black;
 color: #9ea1a3;
 font-family: Consolas,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New, monospace;
}
pre.grey {
 background-color: white;
 border-style: solid;
 border-color: #8b8d8f;
 color: #8b8d8f;
 font-family: Consolas,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New, monospace;
}
</style>

<p><br/> <br/></p>

<p>&ldquo;<em>The recurring suggestions are that models should explicitly (i) include spatiotemporal dynamics; (ii) consider
multiple species in interactions and (iii) account for the processes shaping biodiversity distribution.</em>&rdquo;</p>

<p><code>FATE</code> is a &ldquo;<em>a biodiversity model that meets this challenge at regional scale by combining phenomenological and process-based approaches and using well-defined plant functional group</em>&rdquo;. (<a href="papers/Boulangeat_2014_GCB.pdf" title="Boulangeat, I., Georges, D., Thuiller, W., FATE-HD: A spatially and temporally explicit integrated model for predicting vegetation structure and diversity at regional scale. Global Change Biology, 20, 2368â€“2378.">Boulangeat, 2014</a>)</p>

<p><br/> <br/></p>

<h1>What FATE needs to be run?</h1>

<p><br/></p>

<h3><i class="fa fa-copy"></i> The different type of parameters and <em>flags</em></h3>

<p><code>FATE</code> requires a quite large number of parameters, which are stored into <code>.txt</code> files, presented to and recovered by the software. These <strong>parameters</strong> can be of 3 types :</p>

<ol>
<li><strong>Filenames</strong>, to guide the application to other parameter files that should be read</li>
<li>These filenames either correspond to :

<ul>
<li>other parameter files that contain <strong>values</strong> to be actually read and used</li>
<li><strong>raster</strong> files, with the extension <code>.tif</code> (lighter) or <code>.img</code></li>
</ul></li>
</ol>

<p><br/></p>

<h3><i class="fas fa-wrench"></i> How to produce all these parameters files ?</h3>

<p><a href="https://leca-dev.github.io/RFate/">RFate</a> is a <a href="https://www.r-project.org/">R</a> package available on <a href="https://github.com/leca-dev/RFate">github</a> and designed to provide support function to the <code>FATE</code> software.</p>

<p>It contains documentation and functions to create and organize all input files required by the model, as well as scripts to help analyze the resulting outputs.</p>

<p><br/></p>

<div style = "text-align:center;">See [Build parameter files](rfate_tutorial_2_params.html) RFate tutorial</div>

<p><br/></p>

<h3><i class="fas fa-folder-open"></i> The FATE friendly directory organization</h3>

<p>As <code>FATE</code> needs quite a lot of parameters given into different parameter files, it is important to organize them in a clear and intuitive way.</p>

<p>While this is not mandatory to run a <code>FATE</code> simulation, a specific and methodical folder architecture can be obtained with the <a href="../reference/PRE_FATE.skeletonDirectory.html">PRE_FATE.skeletonDirectory function</a> from the <a href="https://leca-dev.github.io/RFate/">RFate</a> package.</p>

<p>A good way to start is to create this skeleton directory, and then copy or create the needed files inside to have all simulation data into the same place.</p>

<div style="text-align:center">![](pictures/skeleton_directory_2.PNG){width=65%}</div>

<p><br/> <br/></p>

<h1>How to run a FATE Simulation ?</h1>

<p><br/></p>

<p>When all data and parameter files have been produced and correctly referred in a <a href="../reference/PRE_FATE.params_simulParameters.html">SimulParameters</a> file, a <code>FATE</code> simulation can be run using the <a href="../reference/FATE.run.html">FATE.run</a> function : </p>

<ul>
<li>the simulation will start, and the software will print messages into the console indicating what the software is doing.</li>
<li>depending on the simulation duration, the size and the resolution of the study area, the number of Plant Functional Groups (PFG) involved, &hellip; running the full simulation <strong>could take a while</strong>.</li>
</ul>

<p><br/></p>

<p><strong>Note :</strong> the folder from which the command is sent must be adapted based on how paths to files have been given within the <a href="../reference/PRE_FATE.params_simulParameters.html">SimulParameters</a> file :</p>

<ul>
<li><p>If all paths are <strong>absolute</strong><br/>
(i.e. including the root, such as <em><code>/home/username/FATE_simulation/DATA/GLOBAL_PARAMETERS/Global_parameters_V1.txt</code></em>),<br/>
there should not be any problem.<br/>
The only requirement then is to also give absolute path to the simulation folder, if not in the current directory.</p></li>
<li><p>If all paths are <strong>relative</strong><br/>
(i.e. starting from a specific folder, such as <em><code>FATE_simulation/DATA/GLOBAL_PARAMETERS/Global_parameters_V1.txt</code>*),<br/>
then the <code>FATE</code> simulation must be run from this specific folder<br/>
(i.e. here from the folder containing the *<code>FATE_simulation</code></em> folder).</p></li>
</ul>

<p><br/> <br/></p>

<h1>How to handle the results ?</h1>

<p><br/></p>

<p>Once the simulation is completed, the directory defined under the flag <code>--SAVING_DIR--</code> within the <a href="../reference/PRE_FATE.params_simulParameters.html">SimulParameters</a> file must contain the following directories :</p>

<ul>
<li><em><code>ABUND_allPFG_perStrata/</code></em></li>
<li><em><code>ABUND_perPFG_allStrata/</code></em></li>
<li><em><code>ABUND_perPFG_perStrata/</code></em></li>
</ul>

<p>Each of them contains raster files with the abundance of Plant Functional Groups (PFG) (which should be considered as a proxy for the vegetation coverage/abundance) contained within each pixel of the study area. The files within each folder show different informations :</p>

<ul>
<li><em><code>ABUND_perPFG_perStrata/</code></em> : a file represents <strong>one specific year</strong>, and the abundance of <strong>a specific PFG</strong> in <strong>a specific stratum</strong></li>
<li><em><code>ABUND_allPFG_perStrata</code>/</em> : a file represents <strong>one specific year</strong>, and the abundance of <strong>all PFGs</strong> in <strong>a specific stratum</strong></li>
<li><em><code>ABUND_perPFG_allStrata/</code></em> : a file represents <strong>one specific year</strong>, and the abundance of <strong>a specific PFG</strong> within <strong>all strata</strong></li>
</ul>

<p>If the corresponding modules were activated within the <a href="../reference/PRE_FATE.params_globalParameters.html">GlobalParameters</a> file, the following folders should also contain files :</p>

<ul>
<li><em><code>LIGHT/</code></em></li>
<li><em><code>SOIL/</code></em></li>
</ul>

<p>These ouputs can then be used as is, or post-treated with functions from the <a href="https://leca-dev.github.io/RFate/">RFate</a> package to obtain more specific results (e.g. evolution of abundance curves, cover or diversity maps, etc).</p>

<p><br/></p>

<div style = "text-align:center;">See [Build graphics](rfate_tutorial_3_graphics.html) RFate tutorial</div>

</body>

</html>
