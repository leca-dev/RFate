<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a map related to plant functional group results (richness, relative cover, light or soil CWM) for one (or several) specific year of a FATE simulation — POST_FATE.graphic_mapPFG • RFate</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create a map related to plant functional group results (richness, relative cover, light or soil CWM) for one (or several) specific year of a FATE simulation — POST_FATE.graphic_mapPFG"><meta property="og:description" content="This script is designed to produce one (or several) raster map 
related to plant functional group results (richness, relative cover, light 
or soil CWM) for one (or several) specific FATE simulation year."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RFate</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-house"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-pagelines"></span>
     
    FATE
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li>
      <a href="../articles/fate_tutorial_0_publications.html">Publications</a>
    </li>
    <li>
      <a href="../articles/fate_tutorial_0_modelling_framework.html">Modelling framework</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/fate_tutorial_1_PFG.html">a. Principle of PFG</a>
    </li>
    <li>
      <a href="../articles/fate_tutorial_2_RUN_SIMULATION.html">b. Run a FATE simulation</a>
    </li>
    <li>
      <a href="../articles/fate_tutorial_3_MODULES.html">c. Use a FATE module</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-toolbox"></span>
     
    RFate
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li>
      <a href="../articles/rfate_tutorial_1_PFG.html">
        <span class="fa fa-battery-quarter"></span>
         
        Build PFG
      </a>
    </li>
    <li>
      <a href="../articles/rfate_tutorial_2_params.html">
        <span class="fa fa-battery-half"></span>
         
        Build parameter files
      </a>
    </li>
    <li>
      <a href="../articles/rfate_tutorial_3_graphics.html">
        <span class="fa fa-battery-three-quarters"></span>
         
        Build graphics
      </a>
    </li>
    <li class="divider">
  </ul></li>
<li>
  <a href="../articles/interface_tutorial_0_presentation.html">
    <span class="fa fa-desktop"></span>
     
    SHINY interface
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-book"></span>
     
    Reference
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../articles/manual.html">
    <span class="fa fa-stethoscope"></span>
     
    Manual &amp; Examples
  </a>
</li>
<li>
  <a href="../articles/news.html">
    <span class="fa fa-newspaper"></span>
     
    News
  </a>
</li>
<li>
  <a href="https://github.com/leca-dev/RFate.git" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a map related to plant functional group results (richness, relative cover, light or soil CWM) for one (or several) specific year of a <code>FATE</code> simulation</h1>
    <small class="dont-index">Source: <a href="https://github.com/leca-dev/RFate.git/blob/HEAD/R/POST_FATE.graphic_mapPFG.R" class="external-link"><code>R/POST_FATE.graphic_mapPFG.R</code></a></small>
    <div class="hidden name"><code>POST_FATE.graphic_mapPFG.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This script is designed to produce one (or several) raster map 
related to plant functional group results (richness, relative cover, light 
or soil CWM) for one (or several) specific <code>FATE</code> simulation year.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">POST_FATE.graphic_mapPFG</span><span class="op">(</span></span>
<span>  <span class="va">name.simulation</span>,</span>
<span>  file.simulParam <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">years</span>,</span>
<span>  opt.stratum_min <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  opt.stratum_max <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  opt.doBinary <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  opt.no_CPU <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  opt.doPlot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>name.simulation</dt>
<dd><p>a <code>string</code> corresponding to the main directory 
or simulation name of the <code>FATE</code> simulation</p></dd>


<dt>file.simulParam</dt>
<dd><p>default <code>NULL</code>. <br> A <code>string</code> 
corresponding to the name of a parameter file that will be contained into 
the <code>PARAM_SIMUL</code> folder of the <code>FATE</code> simulation</p></dd>


<dt>years</dt>
<dd><p>an <code>integer</code>, or a <code>vector</code> of <code>integer</code>, 
corresponding to the simulation year(s) that will be used to extract PFG 
abundance and binary maps</p></dd>


<dt>opt.stratum_min</dt>
<dd><p>(<em>optional</em>) default <code>1</code>. <br> An 
<code>integer</code> corresponding to the lowest stratum from which PFG 
abundances will be summed up</p></dd>


<dt>opt.stratum_max</dt>
<dd><p>(<em>optional</em>) default <code>10</code>. <br> An 
<code>integer</code> corresponding to the highest stratum from which PFG 
abundances will be summed up</p></dd>


<dt>opt.doBinary</dt>
<dd><p>(<em>optional</em>) default <code>TRUE</code>. <br> If 
<code>TRUE</code>, abundance maps (absolute or relative) are systematically 
multiplied by binary maps (see 
<a href="POST_FATE.graphic_mapPFG#details"><code>Details</code></a>)</p></dd>


<dt>opt.no_CPU</dt>
<dd><p>(<em>optional</em>) default <code>1</code>. <br> The number of 
resources that can be used to parallelize the <code>unzip/zip</code> of raster 
files</p></dd>


<dt>opt.doPlot</dt>
<dd><p>(<em>optional</em>) default <code>TRUE</code>. <br> If <code>TRUE</code>, 
plot(s) will be processed, otherwise only the calculation and reorganization 
of outputs will occur, be saved and returned</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code>list</code> containing one or several (one for each simulation 
year) <code>list</code> of <code>raster</code> and <code>ggplot2</code> objects :</p>


<dl><dt>tab</dt>
<dd><p></p><dl><dt><code>cover</code></dt>
<dd><p><code>raster</code> of relative coverage</p></dd>

      <dt><code>DIV.0</code></dt>
<dd><p><code>raster</code> of species richness</p></dd>

      <dt><code>DIV.1</code></dt>
<dd><p><code>raster</code> of Shannon entropy</p></dd>

      <dt><code>DIV.2</code></dt>
<dd><p><code>raster</code> of Simpson concentration</p></dd>

      <dt><code>CWM.light</code></dt>
<dd><p><code>raster</code> of light community weighted mean</p></dd>

      <dt><code>CWM.soil</code></dt>
<dd><p><code>raster</code> of soil community weighted mean</p></dd>

    
</dl><p></p></dd>

  <dt>plot</dt>
<dd><p></p><dl><dt><code>cover</code></dt>
<dd><p><code>ggplot2</code> object, representing <code>cover</code> 
      raster</p></dd>

      <dt><code>richness</code></dt>
<dd><p><code>ggplot2</code> object, representing 
      <code>DIV.0</code> raster</p></dd>

      <dt><code>CWM.light</code></dt>
<dd><p><code>ggplot2</code> object, representing 
      <code>CWM.light</code> raster</p></dd>

      <dt><code>CWM.soil</code></dt>
<dd><p><code>ggplot2</code> object, representing 
      <code>CWM.soil</code> raster <br><br></p></dd>

    
</dl><p></p></dd>


</dl><p><code class="file">POST_FATE_GRAPHIC_C_map_PFG_[...].pdf</code> file is created containing up 
to four graphics :</p><dl><dt><code class="file">map_PFGcover</code></dt>
<dd><p>to visualize the PFG cover within the studied 
  area</p></dd>

  <dt><code class="file">map_PFGrichness</code></dt>
<dd><p>to visualize the PFG richness within the 
  studied area</p></dd>

  <dt><code class="file">PFGlight</code></dt>
<dd><p>to visualize the light CWM within the studied area</p></dd>

  <dt><code class="file">PFGsoil</code></dt>
<dd><p>to visualize the soil CWM within the studied area</p></dd>


</dl><p>Three <code class="file">PFGrichness_YEAR_[...]_STRATA_all_q[...].tif</code> files are created 
into the simulation results folder :</p><dl><dt><code class="file">q0</code></dt>
<dd><p>PFG richness</p></dd>

  <dt><code class="file">q1</code></dt>
<dd><p>PFG Shannon entropy</p></dd>

  <dt><code class="file">q2</code></dt>
<dd><p>PFG Simpson concentration</p></dd>


</dl><p>Raster files are also created for cover, and light and soil CWM if those 
modules were selected (see <code><a href="PRE_FATE.params_globalParameters.html">PRE_FATE.params_globalParameters</a></code>).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function allows to obtain, for a specific <code>FATE</code> simulation and 
a specific parameter file within this simulation, <strong>up to six raster 
maps</strong> and preanalytical graphics. <br><br></p>
<p>For each PFG and each selected simulation year, raster maps are retrieved 
from the results folders <code>ABUND_perPFG_perStrata</code> and 
<code>BIN_perPFG_perStrata</code> and unzipped. 
Informations extracted lead to the production of up to six graphics before 
the maps are compressed again :</p>
<ul><li><p>map of <strong>PFG richness</strong> within each pixel, representing the sum 
  of binary maps <br><strong>Richness</strong> is calculated with the 
  <strong><a href="http://www.jstor.org/stable/23143936" class="external-link">Leinster &amp; Cobbold 
  2012 Ecology</a> framework</strong> which allows to give more or less importance to 
  the commun species through the <code>q</code> parameter :
  </p><dl><dt><code>q = 0</code></dt>
<dd><p>species richness</p></dd>    <dt><code>q = 1</code></dt>
<dd><p>Shannon entropy</p></dd>    <dt><code>q = 2</code></dt>
<dd><p>Simpson concentration <br><br></p></dd></dl></li>
<li><p>map of <strong>PFG relative cover</strong>, representing the sum of relative 
  abundance maps of all PFG <br> (potentially above a height threshold 
  defined by <code>opt.stratum_min</code>)</p></li>
<li><p><strong>if light was activated</strong> (see 
  <code><a href="PRE_FATE.params_globalParameters.html">PRE_FATE.params_globalParameters</a></code>), <strong>community 
  weighted mean of PFG light preferences</strong> (extracted from <code>LIGHT</code> 
  parameter within <code>LIGHT</code> files, see 
  <code><a href="PRE_FATE.params_PFGlight.html">PRE_FATE.params_PFGlight</a></code>)</p></li>
<li><p><strong>if soil was activated</strong> (see 
  <code><a href="PRE_FATE.params_globalParameters.html">PRE_FATE.params_globalParameters</a></code>), <strong>community 
  weighted mean of PFG soil preferences</strong> (extracted from <code>SOIL_CONTRIB</code> 
  parameter within <code>SOIL</code> files, see 
  <code><a href="PRE_FATE.params_PFGsoil.html">PRE_FATE.params_PFGsoil</a></code>) <br><br></p></li>
</ul><p><strong>It requires</strong> that the <code><a href="POST_FATE.relativeAbund.html">POST_FATE.relativeAbund</a></code>, 
(<code><a href="POST_FATE.graphic_validationStatistics.html">POST_FATE.graphic_validationStatistics</a></code>) and 
<code><a href="POST_FATE.binaryMaps.html">POST_FATE.binaryMaps</a></code> functions have been run and that the 
folders <code>BIN_perPFG_allStrata</code> and <code>BIN_perPFG_perStrata</code> exist. 
<br><br></p>
<p>If <code>opt.doBinary = TRUE</code>, abundance maps (absolute or relative) are 
systematically multiplied by binary maps extracted from 
<code>BIN_perPFG_allStrata</code> and <code>BIN_perPFG_perStrata</code> folders and 
produced by <code><a href="POST_FATE.binaryMaps.html">POST_FATE.binaryMaps</a></code> function. 
This way, produced raster maps reflect the <em>validated/refined</em> predictions. 
<code>opt.doBinary</code> can be set to <code>FALSE</code> to reflect <em>pure</em> 
simulation results.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="POST_FATE.relativeAbund.html">POST_FATE.relativeAbund</a></code>, 
<code><a href="POST_FATE.graphic_validationStatistics.html">POST_FATE.graphic_validationStatistics</a></code>,
<code><a href="POST_FATE.binaryMaps.html">POST_FATE.binaryMaps</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Maya Guéguen</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span>                      </span>
<span><span class="fu">POST_FATE.graphic_mapPFG</span><span class="op">(</span>name.simulation <span class="op">=</span> <span class="st">"FATE_simulation"</span></span>
<span>                         , file.simulParam <span class="op">=</span> <span class="st">"Simul_parameters_V1.txt"</span></span>
<span>                         , years <span class="op">=</span> <span class="fl">850</span></span>
<span>                         , opt.stratum_min <span class="op">=</span> <span class="fl">3</span></span>
<span>                         , opt.no_CPU <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>                                    </span>
<span><span class="fu">POST_FATE.graphic_mapPFG</span><span class="op">(</span>name.simulation <span class="op">=</span> <span class="st">"FATE_simulation"</span></span>
<span>                         , file.simulParam <span class="op">=</span> <span class="st">"Simul_parameters_V1.txt"</span></span>
<span>                         , year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">850</span>, <span class="fl">950</span><span class="op">)</span></span>
<span>                         , opt.doBinary <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span>                                    </span>
<span>                                    </span>
<span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="http://www.will.chez-alice.fr/" class="external-link">Wilfried Thuiller</a>, Damien Georges, <a href="https://iboulangeat.github.io/" class="external-link">Isabelle Boulangeat</a>, <a href="https://mayagueguen.github.io" class="external-link">Maya Guéguen</a>, Guillaume Dupouy.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

